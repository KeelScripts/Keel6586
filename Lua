local library = {}

local ScreenGui = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
local Top = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local Title = Instance.new("TextLabel")
local TimeLabel = Instance.new("TextLabel")
local TabHolder = Instance.new("ScrollingFrame")
local TabList = Instance.new("UIListLayout")
local Container = Instance.new("Frame")
local TabContent = Instance.new("ScrollingFrame")
local ContentList = Instance.new("UIListLayout")

ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.Name = "KavoUI"

Main.Name = "Main"
Main.Parent = ScreenGui
Main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Main.BorderSizePixel = 0
Main.Position = UDim2.new(0, 10, 0.5, -150)
Main.Size = UDim2.new(0, 400, 0, 300)
Main.Active = true
Main.Draggable = true

Top.Name = "Top"
Top.Parent = Main
Top.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Top.Size = UDim2.new(1, 0, 0, 25)
Top.BorderSizePixel = 0
UICorner.CornerRadius = UDim.new(0, 4)
UICorner.Parent = Top

Title.Name = "Title"
Title.Parent = Top
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(0, 200, 1, 0)
Title.Font = Enum.Font.Gotham
Title.Text = "Krypton Mods"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.Position = UDim2.new(0, 5, 0, 0)

TimeLabel.Name = "TimeLabel"
TimeLabel.Parent = Top
TimeLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TimeLabel.BackgroundTransparency = 1
TimeLabel.Size = UDim2.new(0, 100, 1, 0)
TimeLabel.Position = UDim2.new(1, -105, 0, 0)
TimeLabel.Font = Enum.Font.Gotham
TimeLabel.Text = "11:05 AM CDT, Jul 16, 2025"
TimeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TimeLabel.TextSize = 12
TimeLabel.TextXAlignment = Enum.TextXAlignment.Right

TabHolder.Name = "TabHolder"
TabHolder.Parent = Main
TabHolder.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
TabHolder.BorderSizePixel = 0
TabHolder.Position = UDim2.new(0, 0, 0, 25)
TabHolder.Size = UDim2.new(0, 100, 1, -25)
TabHolder.CanvasSize = UDim2.new(0, 0, 0, 0)
TabHolder.ScrollBarThickness = 4
TabHolder.ClipsDescendants = true

TabList.Name = "TabList"
TabList.Parent = TabHolder
TabList.FillDirection = Enum.FillDirection.Vertical
TabList.SortOrder = Enum.SortOrder.LayoutOrder
TabList.Padding = UDim.new(0, 2)

Container.Name = "Container"
Container.Parent = Main
Container.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Container.BorderSizePixel = 0
Container.Position = UDim2.new(0, 100, 0, 25)
Container.Size = UDim2.new(0, 300, 1, -25)

TabContent.Name = "TabContent"
TabContent.Parent = Container
TabContent.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
TabContent.BorderSizePixel = 0
TabContent.Position = UDim2.new(0, 5, 0, 5)
TabContent.Size = UDim2.new(1, -10, 1, -10)
TabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
TabContent.ScrollBarThickness = 4
TabContent.ClipsDescendants = true

ContentList.Name = "ContentList"
ContentList.Parent = TabContent
ContentList.FillDirection = Enum.FillDirection.Vertical
ContentList.SortOrder = Enum.SortOrder.LayoutOrder
ContentList.Padding = UDim.new(0, 5)

-- Key System with Notifications
local key = "KRYPTON"
local hasKey = false

if not hasKey then
    local KeyGui = Instance.new("ScreenGui")
    local KeyFrame = Instance.new("Frame")
    local KeyLabel = Instance.new("TextLabel")
    local KeyBox = Instance.new("TextBox")
    local SubmitButton = Instance.new("TextButton")
    local Notification = Instance.new("Frame")

    KeyGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    KeyFrame.Parent = KeyGui
    KeyFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    KeyFrame.Size = UDim2.new(0, 200, 0, 100)
    KeyFrame.Position = UDim2.new(0.5, -100, 0.5, -50)
    KeyFrame.BorderSizePixel = 0

    KeyLabel.Parent = KeyFrame
    KeyLabel.BackgroundTransparency = 1
    KeyLabel.Size = UDim2.new(1, 0, 0, 20)
    KeyLabel.Text = "Enter Key:"
    KeyLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    KeyLabel.Font = Enum.Font.Gotham
    KeyLabel.TextSize = 14

    KeyBox.Parent = KeyFrame
    KeyBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    KeyBox.Size = UDim2.new(0, 180, 0, 30)
    KeyBox.Position = UDim2.new(0.5, -90, 0, 30)
    KeyBox.Text = ""
    KeyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    KeyBox.Font = Enum.Font.Gotham
    KeyBox.TextSize = 14
    local KeyBoxCorner = Instance.new("UICorner")
    KeyBoxCorner.CornerRadius = UDim.new(0, 4)
    KeyBoxCorner.Parent = KeyBox

    SubmitButton.Parent = KeyFrame
    SubmitButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    SubmitButton.Size = UDim2.new(0, 80, 0, 30)
    SubmitButton.Position = UDim2.new(0.5, -40, 0, 65)
    SubmitButton.Text = "Submit"
    SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    SubmitButton.Font = Enum.Font.Gotham
    SubmitButton.TextSize = 14
    local SubmitCorner = Instance.new("UICorner")
    SubmitCorner.CornerRadius = UDim.new(0, 4)
    SubmitCorner.Parent = SubmitButton

    Notification.Name = "Notification"
    Notification.Parent = KeyGui
    Notification.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    Notification.Size = UDim2.new(0, 200, 0, 40)
    Notification.Position = UDim2.new(0.5, -100, 0.5, -100)
    Notification.Visible = false
    local NotifCorner = Instance.new("UICorner")
    NotifCorner.CornerRadius = UDim.new(0, 4)
    NotifCorner.Parent = Notification
    local NotifText = Instance.new("TextLabel")
    NotifText.Parent = Notification
    NotifText.BackgroundTransparency = 1
    NotifText.Size = UDim2.new(1, 0, 1, 0)
    NotifText.Text = ""
    NotifText.TextColor3 = Color3.fromRGB(255, 255, 255)
    NotifText.Font = Enum.Font.Gotham
    NotifText.TextSize = 14
    NotifText.TextWrapped = true

    SubmitButton.MouseButton1Click:Connect(function()
        if KeyBox.Text:upper() == key then
            hasKey = true
            Notification.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
            NotifText.Text = "Key Accepted!"
            Notification.Visible = true
            wait(1.5)
            Notification.Visible = false
            KeyGui:Destroy()
            Main.Visible = true
        else
            Notification.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            NotifText.Text = "Incorrect Key!"
            Notification.Visible = true
            wait(1.5)
            Notification.Visible = false
        end
    end)

    Main.Visible = false
    wait(0.1) -- Allow GUI to render
end

function library:CreateWindow(title)
    Title.Text = title or "Krypton Mods"
    local Window = {Tabs = {}, SelectedTab = nil}

    function Window:CreateTab(tabName)
        local Tab = {}
        local TabButton = Instance.new("TextButton")
        TabButton.Name = "Tab_" .. tabName
        TabButton.Parent = TabHolder
        TabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        TabButton.Size = UDim2.new(0, 90, 0, 40)
        TabButton.Font = Enum.Font.Gotham
        TabButton.Text = tabName
        TabButton.TextColor3 = Color3.fromRGB(200, 200, 200)
        TabButton.TextSize = 14
        TabButton.BackgroundTransparency = 0
        TabButton.BorderSizePixel = 0
        local Padding = Instance.new("UIPadding")
        Padding.Parent = TabButton
        Padding.PaddingLeft = UDim.new(0, 5)
        local UICorner = Instance.new("UICorner")
        UICorner.CornerRadius = UDim.new(0, 4)
        UICorner.Parent = TabButton

        TabButton.MouseButton1Click:Connect(function()
            for _, btn in pairs(TabHolder:GetChildren()) do
                if btn:IsA("TextButton") then
                    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                end
            end
            TabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            Window.SelectedTab = tabName
            UpdateTabs()
        end)

        function Tab:CreateButton(btnName, callback)
            local Button = Instance.new("TextButton")
            Button.Name = "Button_" .. btnName
            Button.Parent = TabContent
            Button.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            Button.Size = UDim2.new(0, 280, 0, 30)
            Button.Font = Enum.Font.Gotham
            Button.Text = btnName
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 14
            Button.BackgroundTransparency = 0
            Button.BorderSizePixel = 0
            local Padding = Instance.new("UIPadding")
            Padding.Parent = Button
            Padding.PaddingLeft = UDim.new(0, 10)
            local UICorner = Instance.new("UICorner")
            UICorner.CornerRadius = UDim.new(0, 4)
            UICorner.Parent = Button

            Button.MouseButton1Click:Connect(callback)
            return Button
        end

        table.insert(Window.Tabs, {Name = tabName, Button = TabButton, Content = {}})
        if not Window.SelectedTab then
            Window.SelectedTab = tabName
            TabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        end
        return Tab
    end

    function UpdateTabs()
        TabContent:ClearAllChildren()
        ContentList = Instance.new("UIListLayout")
        ContentList.Parent = TabContent
        ContentList.FillDirection = Enum.FillDirection.Vertical
        ContentList.SortOrder = Enum.SortOrder.LayoutOrder
        ContentList.Padding = UDim.new(0, 5)

        local activeTab = nil
        for _, tab in pairs(Window.Tabs) do
            if tab.Name == Window.SelectedTab then
                activeTab = tab
                break
            end
        end

        if activeTab then
            if activeTab.Name == "Scripts" then
                scriptEditor.Parent = TabContent
                ExecuteButton.Parent = TabContent
                TabContent.CanvasSize = UDim2.new(0, 0, 0, 240) -- Editor (200) + Button (40)
            else
                TabContent.CanvasSize = UDim2.new(0, 0, 0, #activeTab.Content * 35)
                for i, content in pairs(activeTab.Content) do
                    content[2]() -- Execute callback
                    activeTab.Button:CreateButton(content[1], content[2])
                end
            end
        end
        TabHolder.CanvasSize = UDim2.new(0, 0, 0, #Window.Tabs * 42)
    end

    local WindowTab = Window:CreateTab("Home")
    WindowTab.Content = {{"Toggle GUI", function() Main.Visible = not Main.Visible end}}

    local ModsTab = Window:CreateTab("Mods")
    local modStates = {
        SuperSpeed = false,
        SuperJump = false,
        Fog = false,
        Neon = false,
        Aimbot = false,
        ESP = false
    }

    ModsTab.Content = {
        {"Super Speed", function()
            modStates.SuperSpeed = not modStates.SuperSpeed
            local character = game.Players.LocalPlayer.Character
            if character and character:FindFirstChild("Humanoid") then
                character.Humanoid.WalkSpeed = modStates.SuperSpeed and 64 or 16
            end
        end},
        {"Super Jump", function()
            modStates.SuperJump = not modStates.SuperJump
            local character = game.Players.LocalPlayer.Character
            if character and character:FindFirstChild("Humanoid") then
                character.Humanoid.JumpPower = modStates.SuperJump and 100 or 50
            end
        end},
        {"Fog On", function()
            modStates.Fog = not modStates.Fog
            local lighting = game:GetService("Lighting")
            lighting.FogEnd = modStates.Fog and 50 or 1000
        end},
        {"Neon Skin", function()
            modStates.Neon = not modStates.Neon
            local character = game.Players.LocalPlayer.Character
            if character then
                for _, part in pairs(character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.Material = modStates.Neon and Enum.Material.Neon or Enum.Material.Plastic
                    end
                end
            end
        end},
        {"Aimbot", function()
            modStates.Aimbot = not modStates.Aimbot
            local player = game.Players.LocalPlayer
            local mouse = player:GetMouse()
            local userInputService = game:GetService("UserInputService")
            local runService = game:GetService("RunService")

            if modStates.Aimbot then
                local connection
                connection = runService.RenderStepped:Connect(function()
                    if modStates.Aimbot and userInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
                        local maxDistance = math.huge
                        local target = nil
                        for _, plr in pairs(game.Players:GetPlayers()) do
                            if plr ~= player and plr.Character and plr.Character:FindFirstChild("Head") then
                                local head = plr.Character.Head
                                local screenPoint, onScreen = workspace.CurrentCamera:WorldToViewportPoint(head.Position)
                                local distance = (Vector2.new(mouse.X, mouse.Y) - Vector2.new(screenPoint.X, screenPoint.Y)).Magnitude
                                if onScreen and distance < maxDistance then
                                    maxDistance = distance
                                    target = head
                                end
                            end
                        end
                        if target then
                            workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, target.Position)
                        end
                    end
                end)
                spawn(function()
                    while wait() do
                        if not modStates.Aimbot then
                            connection:Disconnect()
                            break
                        end
                    end
                end)
            end
        end},
        {"ESP", function()
            modStates.ESP = not modStates.ESP
            local function createEsp(plr)
                if plr.Character and plr.Character:FindFirstChild("Head") then
                    local billboard = Instance.new("BillboardGui")
                    billboard.Parent = plr.Character.Head
                    billboard.Size = UDim2.new(0, 100, 0, 100)
                    billboard.AlwaysOnTop = true
                    local frame = Instance.new("Frame")
                    frame.Parent = billboard
                    frame.Size = UDim2.new(0, 100, 0, 100)
                    frame.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                    frame.Transparency = 0.5
                end
            end

            local function removeEsp(plr)
                if plr.Character and plr.Character:FindFirstChild("Head") and plr.Character.Head:FindFirstChild("BillboardGui") then
                    plr.Character.Head:FindFirstChild("BillboardGui"):Destroy()
                end
            end

            if modStates.ESP then
                for _, plr in pairs(game.Players:GetPlayers()) do
                    if plr ~= game.Players.LocalPlayer and plr.Character then
                        createEsp(plr)
                    end
                end
                game.Players.PlayerAdded:Connect(function(plr)
                    plr.CharacterAdded:Connect(function()
                        if modStates.ESP then createEsp(plr) end
                    end)
                end)
            else
                for _, plr in pairs(game.Players:GetPlayers()) do
                    removeEsp(plr)
                end
            end
        end}
    }

    local ScriptsTab = Window:CreateTab("Scripts")
    local scriptEditor = Instance.new("TextBox")
    scriptEditor.Name = "ScriptEditor"
    scriptEditor.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    scriptEditor.BorderSizePixel = 0
    scriptEditor.Position = UDim2.new(0, 5, 0, 5)
    scriptEditor.Size = UDim2.new(1, -10, 0, 200)
    scriptEditor.Font = Enum.Font.Code
    scriptEditor.Text = "-- Enter Lua code here (e.g., print('Hello'))"
    scriptEditor.TextColor3 = Color3.fromRGB(200, 200, 200)
    scriptEditor.TextSize = 14
    scriptEditor.TextWrapped = true
    scriptEditor.MultiLine = true
    local EditorCorner = Instance.new("UICorner")
    EditorCorner.CornerRadius = UDim.new(0, 4)
    EditorCorner.Parent = scriptEditor

    local ExecuteButton = Instance.new("TextButton")
    ExecuteButton.Name = "ExecuteButton"
    ExecuteButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    ExecuteButton.Size = UDim2.new(0, 100, 0, 30)
    ExecuteButton.Position = UDim2.new(0, 10, 0, 210)
    ExecuteButton.Font = Enum.Font.Gotham
    ExecuteButton.Text = "Execute"
    ExecuteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ExecuteButton.TextSize = 14
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 4)
    ButtonCorner.Parent = ExecuteButton

    ScriptsTab.Content = {
        {"Execute Script", function()
            local success, error = pcall(function()
                loadstring(scriptEditor.Text)()
            end)
            if not success then
                warn("Script Error: " .. error)
            end
        end}
    }

    Window:CreateTab("Random")
    Window:CreateTab("Plus")

    UpdateTabs()
    return Window
end

local Window = library:CreateWindow("Krypton Mods")
